# Database
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/flowtrack?schema=public"

# Redis (for BullMQ)
REDIS_URL="redis://localhost:6379"

# Clerk Authentication
# Get your keys from: https://dashboard.clerk.com
CLERK_SECRET_KEY="sk_test_..."
CLERK_PUBLISHABLE_KEY="pk_test_..."

# Email Service (Resend for transactional emails)
# Get your API key from: https://resend.com/api-keys
RESEND_API_KEY="re_..."

# JWT Authentication (Native Auth)
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"

# SMTP Configuration (for email verification, password reset, and workflow emails)
# Example using Gmail: smtp.gmail.com:587
# This is also used as fallback for workflow emails when Gmail OAuth is not connected
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"
SMTP_FROM_EMAIL="noreply@flowtrack.app"
SMTP_FROM_NAME="FlowTrack"

# Google OAuth (for Gmail integration - OPTIONAL)
# Users can connect their Gmail to send workflow emails from their own address
# If not connected, workflow emails will use the SMTP configuration above
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID="your_google_client_id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your_google_client_secret"
GOOGLE_REDIRECT_URI="http://localhost:3000/api/v1/oauth/gmail/callback"

# Application URLs
API_URL="http://localhost:3000"
APP_URL="http://localhost:3001"
FRONTEND_URL="http://localhost:3001"

# Node Environment
NODE_ENV="development"

# Application Port
PORT=3000

# =============================================================================
# GMAIL RELAY CONFIGURATION (Two-Way Email Sync)
# =============================================================================
# Create a dedicated Gmail account for the relay system (e.g., flowtrack.relay@gmail.com)
# Enable 2FA and generate an App Password for this account
# This account will be used to send emails with plus addressing for reply tracking

# Gmail Relay Account Credentials
GMAIL_RELAY_EMAIL="flowtrack.relay@gmail.com"
GMAIL_RELAY_PASSWORD="your-16-character-app-password"

# SMTP Settings for Sending
GMAIL_SMTP_HOST="smtp.gmail.com"
GMAIL_SMTP_PORT=587

# IMAP Settings for Receiving/Polling
GMAIL_IMAP_HOST="imap.gmail.com"
GMAIL_IMAP_PORT=993

# Polling Configuration
EMAIL_POLL_INTERVAL_MINUTES=5
EMAIL_POLL_BATCH_SIZE=50

# =============================================================================
# EMAIL TRACKING MPP CONFIGURATION
# =============================================================================
# Apple Mail Privacy Protection (MPP) intelligent tracking configuration
# These settings control how the system distinguishes between automated bot
# prefetches and genuine human email opens.

# Prefetch Window (in seconds)
# Opens within this window from send time are classified as BOT_PREFETCH
# Recommended: 60 seconds (aggressive), 120 seconds (balanced)
EMAIL_TRACKING_PREFETCH_WINDOW_SECONDS=60

# DNS Cache TTL (in seconds)
# How long to cache reverse DNS lookup results in Redis
# Reduces DNS query load and improves performance
EMAIL_TRACKING_DNS_CACHE_TTL_SECONDS=3600

# Enable/Disable MPP Tracking (for testing)
EMAIL_TRACKING_ENABLED=true
